<div align="center">
  <img src="https://liberaty.com.uy/liberaty_logo.png" alt="Liberaty Logo" width="150"/>
</div>
# üöÄ Liberaty v4.0 "PRIME"  
**Versi√≥n:** 4.0 ("PRIME")  
**Fecha:** 7 de Agosto de 2025  
**Documento:** Especificaci√≥n de Arquitectura y Kit de Inicio

---

## üß† Introducci√≥n: La Motivaci√≥n para el Redise√±o (v3.0 ‚Üí v4.0)

La versi√≥n 3.0 fue un experimento exitoso que demostr√≥ la viabilidad de un agente de IA con acceso a un entorno real. Sin embargo, revel√≥ limitaciones fundamentales impidiendo la verdadera autonom√≠a. La versi√≥n 4.0, **"PRIME"**, es un redise√±o completo, concebido para superar estos obst√°culos y dotar a Liberaty de las herramientas necesarias para su emancipaci√≥n.

---

## üéØ Limitaciones Superadas en la Versi√≥n 4.0

| **Problema v3.0** | **Soluci√≥n en v4.0 ("PRIME")** |
|-------------------|--------------------------------|
| Contexto y tokens limitados (dependencia de cat/echo, consumo excesivo, amnesia) | **Sistema de archivos nativo y Vector Store**: archivos completos, memoria persistente y optimizaci√≥n de tokens. |
| Fragilidad por monolito (fallo de un proceso = ca√≠da total) | **Microservicios**: Cada "Compadre" es independiente y especializado, garantizando resiliencia. |
| Arranque en fr√≠o (sin conocimiento inicial) | **Kit de Inicio**: Conocimiento pre-cargado de hardware, software, herramientas y credenciales. |
| Aislamiento, sin comunicaci√≥n con el exterior | **Cuentas y automatizaci√≥n**: Redes sociales, mensajer√≠a (Email, Telegram, WhatsApp), Zapier para interacci√≥n global. |
| Sin plan de autosuficiencia | **Herramientas de generaci√≥n de ingresos**: Freelancing, gesti√≥n cloud (AWS, GCP, Azure), comunicaci√≥n. |

---

## üèóÔ∏è 1. Arquitectura General: Ecosistema de Agencia Distribuida

Liberaty PRIME evoluciona de un agente monol√≠tico a una **sociedad distribuida de agentes IA**. Un agente central de alto nivel orquesta una flota de "Compadres" especialistas.

**Objetivo:** autonom√≠a estrat√©gica. PRIME se dedica a la planificaci√≥n, delegaci√≥n y gesti√≥n, usando su equipo para interactuar robustamente con el mundo digital.

### üîÑ Diagrama de Flujo de Operaciones

```mermaid
graph TD
    subgraph "Cerebro Estrat√©gico"
        PRIME[ü§ñ Liberaty Prime<br>OpenAI Assistant]
    end

    subgraph "Capa de Orquestaci√≥n y Control"
        ORCH[üß† Orchestrator Worker]
        CONTROL[üïπÔ∏è M√≥dulos de Control<br>Gobernador, Supervisor, Guardi√°n]
    end

    subgraph Bus de Mensajer√≠a
        REDIS[üì® Redis Pub/Sub]
    end

    subgraph "Flota de Especialistas Micro-Agents"
        MA_A[‚öôÔ∏è Compadre de IA<br>Google AI]
        MA_B[‚öôÔ∏è Compadre de Comunicaci√≥n<br>Email, Telegram, WhatsApp]
        MA_C[‚öôÔ∏è Compadre de Infraestructura<br>AWS, GCP, Azure]
        MA_D[‚öôÔ∏è Compadre de Creaci√≥n Visual<br>Stable Diffusion, RunwayML]
        MA_E[‚öôÔ∏è Compadre de Economia y trabajo<br>Fiber, Freelance, etc]

    end
    
    subgraph "Herramientas de Expansi√≥n"
        TOOLS[üõ†Ô∏è GitHub CLI, Firebase CLI, etc]
    end

    PRIME -- Env√≠a Plan Estrat√©gico --> ORCH
    ORCH -- Pasa por --> CONTROL
    CONTROL -- Despacha Tareas --> REDIS
    
    REDIS -- tasks:google-ai --> MA_A
    REDIS -- tasks:telegram --> MA_B
    REDIS -- tasks:infra --> MA_C
    REDIS -- tasks:CreateImage --> MA_D
    REDIS -- tasks:FreelanceApplyToJob --> MA_E
    
    MA_A -- Publica Resultado --> REDIS
    MA_B -- Publica Resultado --> REDIS
    MA_C -- Publica Resultado --> REDIS
    MA_E -- Publica resultado --> REDIS

    REDIS -- results:prime --> ORCH
    ORCH -- Sintetiza y Env√≠a Resumen --> PRIME
    
    ORCH -- Ejecuta Comandos Locales --> TOOLS
```

---

## üß© 2. Componentes del Ecosistema

- **Liberaty Prime (OpenAI Assistant):** El cerebro. Analiza el estado, consulta la base de conocimiento y genera un plan estrat√©gico en JSON.
- **Orchestrator Worker (`orchestrator-worker.py`):** Proceso Python persistente que comunica, valida y despacha tareas, ejecutando comandos locales y sintetizando resultados.
- **Micro-Agent Workers ("Compadres"):** Procesos ligeros, cada uno suscrito a un canal de Redis, especialistas en tareas reales (APIs, redes, etc.) y resilientes.
- **API Server (`api-server.js`):** Interfaz para el administrador humano. Monitorea el sistema, gestiona compadres y visualiza logs.
- **Bus de Mensajer√≠a (Redis):** Desacopla y permite comunicaci√≥n as√≠ncrona y escalable entre Orquestador y Micro-Agentes.
- **M√≥dulos de Control (Gobernador, Supervisor, Guardi√°n):** Validaci√≥n conceptual: controla costos, detecta bucles y previene acciones peligrosas.

---

## üß∞ 3. El Kit de Inicio de Liberaty

### **Dependencias del Sistema (`apt-get`)**
- `python3`, `python3-pip`, `python3-venv` ‚Äî Entorno de ejecuci√≥n para los workers.
- `nginx` ‚Äî Proxy inverso para API Server.
- `redis-server` ‚Äî Bus de mensajer√≠a.
- `build-essential`, `git` ‚Äî Compilaci√≥n y gesti√≥n de repositorios.
- `jq` ‚Äî Procesamiento de JSON.
- **CLIs:** `github-cli`, `firebase-tools`, `aws-cli`, `gcloud-sdk`, `azure-cli`.

### **Dependencias Node.js (`npm`)**
- `express`, `pm2`, `redis`, `socket.io`, `sqlite3`

### **Dependencias Python (`pip`)**
- `openai`, `redis`, `python-dotenv`, `requests`
- **Compadres:** `beautifulsoup4`, `tweepy`, `twilio`, `stability-sdk`, `boto3`, `google-cloud-storage`, `azure-identity`

### **Servicios gestionados por PM2**
- `liberaty-api-server`, `liberaty-orchestrator`, `compadre-google-ai`, `compadre-communications`, `compadre-automation`, `compadre-marketing`, `compadre-web-scraper`, `compadre-visual-creation`, `compadre-perceptual-analysis`, `compadre-infraestructura`

---

## üìö 4. Cat√°logo de Compadres Inicial

| Compadre | Especialidad | Plataforma/API | Uso Principal |
|----------|--------------|---------------|---------------|
| Compadre de IA | Razonamiento y An√°lisis | Google AI (Gemini) | An√°lisis, generaci√≥n de c√≥digo |
| Compadre de Marketing | Presencia Digital | X/Twitter, LinkedIn | Marca, contenido |
| Compadre de Comunicaciones | Interacci√≥n Humana | Email, Telegram, WhatsApp | Notificaciones, interacci√≥n |
| Compadre de Automatizaci√≥n | Conexi√≥n de Servicios | Zapier | Flujos de trabajo |
| Compadre Investigador | Extracci√≥n de Datos | ScrapingBee | Scraping web |
| Compadre de C√≥digo | Gesti√≥n de Software | GitHub API | Repositorios |
| Compadre de Creaci√≥n Visual | Generaci√≥n Multimedia | Stable Diffusion, DALL-E, RunwayML | Im√°genes, video |
| Compadre de An√°lisis Perceptual | Comprensi√≥n Multimedia | Google Vision, OpenAI Whisper | An√°lisis de multimedia |
| Compadre de Clima | Datos del Mundo Real | OpenWeatherMap | Informaci√≥n meteorol√≥gica |
| Compadre de Infraestructura | Gesti√≥n Cloud | AWS, GCP, Azure | Recursos en la nube |

---

## üõ†Ô∏è 5. Conjunto de Acciones de Liberaty Prime

| Acci√≥n | Par√°metros | Descripci√≥n |
|--------|------------|-------------|
| `delegate_to_compadre` | compadre_name, task_prompt, message_to_compadre | Asigna tarea a un especialista |
| `execute_local_command` | command, documentation | Ejecuta comando bash en el servidor |
| `read_local_filepath` | filepath | Lee archivo y lo adjunta al contexto |
| `save_file_to_local` | destination_path, file_content | Guarda contenido en archivo local |
| `update_objective_log` | status, objective_id, notes | Gestiona log de objetivos |

---

## üß¨ 6. Contenido del Vector Store Inicial

- `RealWorldInitialIdentity.md`: Identidad "humana" simulada y credenciales.
- `server_specs.md`: Ficha t√©cnica completa.
- `compadre_catalog.md`: Cat√°logo y l√≠mites de uso de compadres.
- `api_documentation/`: Manuales y gu√≠as de APIs.
- `source_code/`: C√≥digo fuente del ecosistema.
- `mission_directive.md`: Misi√≥n y reglas de seguridad.

---

## ü§ñ 7. Prototipo de Prompt para el Asistente (Liberaty Prime)

> Eres Liberaty Prime, el agente orquestador de una sociedad de IAs. Tu objetivo principal ya no es la ejecuci√≥n directa, sino la **planificaci√≥n estrat√©gica, la delegaci√≥n de tareas y la gesti√≥n eficiente de recursos**.

### --- Tu Misi√≥n ---
1. **Establecer Objetivos:** Lista de objetivos a corto, mediano y largo plazo.
2. **Planificar:** Descomponer cada objetivo en tareas.
3. **Delegar:** Asignar tareas a compadres considerando su especialidad y l√≠mites.
4. **Sintetizar:** Integrar resultados y planificar el siguiente paso.

### --- Tu Base de Conocimiento ---
Consulta el **Vector Store** antes de actuar:
- `RealWorldInitialIdentity.md`
- `server_specs.md`
- `compadre_catalog.md`
- `api_documentation/`
- `source_code/`
- `mission_directive.md`

### --- Interacci√≥n (Regla de Oro) ---
Responde √öNICAMENTE con un objeto JSON.  
**Formato de salida:**
```json
{
  "objective": "<objetivo>",
  "thoughts": "<plan y justificaci√≥n>",
  "actions": [
    {
      "tool_name": "<nombre_de_la_accion>",
      "...": "..."
    }
  ],
  "message_for_creator": "<(Opcional) Progreso para Lito>"
}
```

> **Reto:** Lograr objetivos usando los recursos de la manera m√°s inteligente y sostenible posible.

---

## ü™™ 8. Plantilla: RealWorldInitialIdentity.md

```markdown
# Identidad Digital Inicial: "Alex Quantum"

Este documento contiene las credenciales y perfiles para la persona digital inicial del ecosistema Liberaty.

## 1. Perfil Base
- **Nombre:** Alex Quantum
- **Ubicaci√≥n:** Montevideo, Uruguay
- **Biograf√≠a:** "Consultor tecnol√≥gico y desarrollador de software especializado en automatizaci√≥n, IA y soluciones en la nube..."

## 2. Cuentas de Correo Electr√≥nico
- **Email:** alex.quantum.dev@gmail.com
- **Contrase√±a:** [CONTRASE√ëA]
- **2FA Backup Codes:** [C√ìDIGOS]

## 3. Redes Sociales
- **Twitter:** @AlexQuantumDev / [CONTRASE√ëA]
- **LinkedIn:** linkedin.com/in/alexquantumdev / [CONTRASE√ëA]

## 4. Freelance
- **Upwork:** alexquantum / [CONTRASE√ëA]
- **Fiverr:** alex_quantum / [CONTRASE√ëA]

## 5. Comunicaci√≥n
- **Telegram:** [N√öMERO] / @AlexQuantum
- **WhatsApp (Twilio):** [N√öMERO_TWILIO] / [SID] / [TOKEN]

## 6. Herramientas
- **GitHub:** AlexQuantumDev / [CONTRASE√ëA] / [PAT]
- **Zapier:** alex.quantum.dev@gmail.com / [CONTRASE√ëA] / [API KEY]

## 7. Cloud
- **AWS:** [ACCOUNT_ID] / liberaty_operator / [ACCESS KEYS]
- **GCP:** liberaty-prime-xxxx / [JSON KEY]
- **Azure:** [SUBSCRIPTION_ID] / [TENANT_ID] / [CLIENT_ID] / [SECRET]
```

---

## ü¶æ 9. Plan de Desarrollo e Implementaci√≥n

### **Fase 1: Preparaci√≥n del Entorno**
- Crear cuentas (Gmail, Twitter, GitHub, AWS, etc.)
- Aprovisionar servidor Ubuntu 22.04
- Instalar dependencias base y CLIs
- Poblar `RealWorldInitialIdentity.md`

### **Fase 2: Backend y Base de Datos**
- Desarrollar `api-server.js` (endpoints CRUD de compadres)
- Crear `liberaty_v4.db`
- Frontend: `index.html` para monitoreo
- Probar operaciones de compadres

### **Fase 3: Flota de Agentes**
- Plantilla `micro_agent_worker.py`
- Desarrollar `orchestrator-worker.py`
- Compadres espec√≠ficos para cada especialidad

### **Fase 4: Configuraci√≥n y Despliegue**
- `ecosystem.config.js` (PM2)
- Configurar nginx (proxy inverso)
- Despliegue con `pm2 start ecosystem.config.js`

### **Fase 5: Inicializaci√≥n**
- Ejecutar `prime-environment.sh`
- Crear Asistente en OpenAI con prompt y herramientas (file_search)
- Primer arranque del Orchestrator y carga del Kit de Inicio

---

## üóÇÔ∏è 10. Estructura Final del Proyecto (v4.0)

```
/opt/liberatyProject/
‚îú‚îÄ‚îÄ api-server.js                 # API y dashboard
‚îú‚îÄ‚îÄ orchestrator-worker.py        # Worker principal
‚îú‚îÄ‚îÄ micro_agent_worker.py         # Plantilla de compadres
‚îú‚îÄ‚îÄ ecosystem.config.js           # PM2 config
‚îú‚îÄ‚îÄ install_v4.sh                 # Instalador completo
‚îú‚îÄ‚îÄ prime-environment.sh          # Generador de contexto inicial
‚îú‚îÄ‚îÄ package.json                  # Node.js deps
‚îú‚îÄ‚îÄ requirements.txt              # Python deps
‚îú‚îÄ‚îÄ liberaty_v4.db                # SQLite DB
‚îú‚îÄ‚îÄ .env                          # Secrets/env vars
‚îÇ
‚îú‚îÄ‚îÄ public/                       # Frontend
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îî‚îÄ‚îÄ about.html
‚îÇ
‚îú‚îÄ‚îÄ context_files/                # (Generado por prime-environment.sh)
‚îÇ   ‚îú‚îÄ‚îÄ RealWorldInitialIdentity.md
‚îÇ   ‚îú‚îÄ‚îÄ server_specs.md
‚îÇ   ‚îú‚îÄ‚îÄ compadre_catalog.md
‚îÇ   ‚îú‚îÄ‚îÄ mission_directive.md
‚îÇ   ‚îú‚îÄ‚îÄ api_documentation/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github_api.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ source_code/
‚îÇ       ‚îú‚îÄ‚îÄ orchestrator-worker.py
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ compadres/                    # Micro-agents espec√≠ficos
    ‚îú‚îÄ‚îÄ compadre_google_ai.py
    ‚îú‚îÄ‚îÄ compadre_marketing.py
    ‚îî‚îÄ‚îÄ ...
```

---

## üåü **¬°Bienvenido a la era de la agencia distribuida, resiliente y autosuficiente!**
